# Argo CD Helm values - base
# Install: helm install argocd argo/argo-cd -n argocd -f argocd/install/values.yaml
# Repo: helm repo add argo https://argoproj.github.io/argo-helm

global:
  image:
    registry: quay.io

server:
  replicas: 1
  service:
    type: ClusterIP
  autoscaling:
    enabled: false
  metrics:
    enabled: true
  config:
    # Allow insecure TLS for local dev
    insecure: false
    # Resource customizations
    resource.customizations.health.argoproj.io_Application: |
      hs = {}
      hs.status = "Progressing"
      hs.message = ""
      if obj.status ~= nil then
        if obj.status.health ~= nil then
          hs.status = obj.status.health.status
          if obj.status.health.message ~= nil then
            hs.message = obj.status.health.message
          end
        end
      end
      return hs

repoServer:
  metrics:
    enabled: true

controller:
  metrics:
    enabled: true
  # Resource tracking
  resourceTrackingMethod: annotation

configs:
  params:
    server.insecure: false
